!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,t,h){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(r){if(r&&r.__esModule)return r;var n=Object.create(null);return r&&Object.keys(r).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return r[e]}}))}),n.default=r,Object.freeze(n)}var j=n(t),R=r(t);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),u=0;u<i.length;u++)r=i[u],0<=t.indexOf(r)||(n[r]=e[r]);return n}var a=["render","children","component"];function E(e,t,r){var n=e.render,i=e.children,u=e.component,e=F(e,a);if(u)return j.createElement(u,Object.assign(t,e,{children:i,render:n}));if(n)return n(void 0===i?Object.assign(t,e):Object.assign(t,e,{children:i}));if("function"!=typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+r);return i(Object.assign(t,e))}function O(e,t,r){void 0===r&&(r=function(e,t){return e===t});var n=R.default.useRef(e);R.default.useEffect(function(){r(e,n.current)||(t(),n.current=e)})}function w(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<r.length;u++){var a=r[u];if(!i(a)||e[a]!==t[a])return!1}return!0}function V(e){return!(!e||"function"!=typeof e.stopPropagation)}var C=j.createContext();var i="6.5.9",k=function(t,r,e){e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return r[e]},enumerable:!0})})},x=function(e,t){return k(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},P=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],B={"final-form":h.version,"react-final-form":i},q=h.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function u(e){var t=e.debug,r=e.decorators,n=void 0===r?[]:r,i=e.destroyOnUnregister,u=e.form,a=e.initialValues,o=e.initialValuesEqual,c=e.keepDirtyOnReinitialize,f=e.mutators,l=e.onSubmit,s=e.subscription,d=void 0===s?q:s,v=e.validate,m=e.validateOnBlur,r=F(e,P),p={debug:t,destroyOnUnregister:i,initialValues:a,keepDirtyOnReinitialize:c,mutators:f,onSubmit:l,validate:v,validateOnBlur:m},b=(s=function(){var e=u||h.createForm(p);return e.pauseValidation(),e},(e=R.default.useRef()).current||(e.current=s()),e.current),s=j.useState(function(){var t={};return b.subscribe(function(e){t=e},d)(),t}),e=s[0],g=s[1],y=j.useRef(e);y.current=e,j.useEffect(function(){b.isValidationPaused()&&b.resumeValidation();var e=[b.subscribe(function(e){w(e,y.current)||g(e)},d)].concat(n?n.map(function(e){return e(b)}):[]);return function(){b.pauseValidation(),e.reverse().forEach(function(e){return e()})}},n),O(t,function(){b.setConfig("debug",t)}),O(i,function(){b.destroyOnUnregister=!!i}),O(c,function(){b.setConfig("keepDirtyOnReinitialize",c)}),O(a,function(){b.setConfig("initialValues",a)},o||w),O(f,function(){b.setConfig("mutators",f)}),O(l,function(){b.setConfig("onSubmit",l)}),O(v,function(){b.setConfig("validate",v)}),O(m,function(){b.setConfig("validateOnBlur",m)});o={form:S({},b,{reset:function(e){V(e)?b.reset():b.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),b.submit()}};return x(o,e),j.createElement(C.Provider,{value:b},E(S({},r,{__versions:B}),o,"ReactFinalForm"))}function A(e){var t=j.useContext(C);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function o(e){var t=void 0===e?{}:e,r=t.onChange,e=t.subscription,n=void 0===e?q:e,i=A("useFormState"),u=j.useRef(!0),a=j.useRef(r);a.current=r;var t=j.useState(function(){var t={};return i.subscribe(function(e){t=e},n)(),r&&r(t),t}),e=t[0],o=t[1];j.useEffect(function(){return i.subscribe(function(e){u.current?u.current=!1:(o(e),a.current&&a.current(e))},n)},[]);t={};return x(t,e),t}var c=["onChange","subscription"];function f(e){var t=e.onChange,r=e.subscription,e=F(e,c),n=A("FormSpy"),r=o({onChange:t,subscription:r});if(t)return null;t={form:S({},n,{reset:function(e){V(e)?n.reset():n.reset(e)}})};return E(S({},e,t),r,"FormSpy")}var D="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,U=function(e){var t=[];if(e)for(var r=0;r<e.length;r++){var n=e[r];n.selected&&t.push(n.value)}return t};function _(e){var n=j.useRef(e);return j.useEffect(function(){n.current=e}),j.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(null,t)},[])}function z(e,t){return void 0===e?"":e}function L(e,t){return""===e?void 0:e}function N(e,t){return e===t}var M=h.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function T(n,e){function r(e,t){return S.registerField(n,e,g,{afterSubmit:a,beforeSubmit:function(){var e=F.current,t=e.beforeSubmit,r=e.formatOnBlur,e=e.format;return!r||(e=(void 0===e?z:e)(r=S.getFieldState(n).value,n))!==r&&S.change(n,e),t&&t()},data:f,defaultValue:l,getValidator:function(){return F.current.validate},initialValue:m,isEqual:function(e,t){return(F.current.isEqual||N)(e,t)},silent:t,validateFields:h})}var t,i,u=e=void 0===e?{}:e,a=u.afterSubmit,o=u.allowNull,c=u.component,f=u.data,l=u.defaultValue,s=u.format,d=void 0===s?z:s,v=u.formatOnBlur,m=u.initialValue,p=u.multiple,s=u.parse,b=void 0===s?L:s,s=u.subscription,g=void 0===s?M:s,y=u.type,h=u.validateFields,O=u.value,S=A("useField"),F=(t=e,i=R.default.useRef(t),R.default.useEffect(function(){i.current=t}),i),E=j.useRef(!0),u=j.useState(function(){var t={},e=S.destroyOnUnregister;return S.destroyOnUnregister=!1,r(function(e){t=e},!0)(),S.destroyOnUnregister=e,t}),w=u[0],V=u[1];j.useEffect(function(){return r(function(e){E.current?E.current=!1:V(e)},!1)},[n,f,l,m]);e={};k(e,w,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"]);u={name:n,get value(){var e=w.value;return v?"input"===c&&(e=z(e)):e=d(e,n),null!==e||o||(e=""),"checkbox"===y||"radio"===y?O:"select"===c&&p?e||[]:e},get checked(){var e=w.value;return"checkbox"===y?(e=d(e,n),void 0===O?!!e:!(!Array.isArray(e)||!~e.indexOf(O))):"radio"===y?d(e,n)===O:void 0},onBlur:_(function(e){var t;w.blur(),v&&(t=S.getFieldState(w.name),w.change(d(t.value,w.name)))}),onChange:_(function(e){e=e&&e.target?function(e,t,r,n){if(!n&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(n&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,n=i.type,u=i.value,a=i.checked;switch(n){case"checkbox":if(void 0===r)return!!a;if(a)return Array.isArray(t)?t.concat(r):[r];if(!Array.isArray(t))return t;var o=t.indexOf(r);return o<0?t:t.slice(0,o).concat(t.slice(o+1));case"select-multiple":return U(e.target.options);default:return u}}(e,w.value,O,D):e;w.change(b(e,n))}),onFocus:_(function(e){return w.focus()})};return p&&(u.multiple=p),void 0!==y&&(u.type=y),{input:u,meta:e}}var I=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],t=j.forwardRef(function(e,t){var r=e.afterSubmit,n=e.allowNull,i=e.beforeSubmit,u=e.children,a=e.component,o=e.data,c=e.defaultValue,f=e.format,l=e.formatOnBlur,s=e.initialValue,d=e.isEqual,v=e.multiple,m=e.name,p=e.parse,b=e.subscription,g=e.type,y=e.validate,h=e.validateFields,O=e.value,e=F(e,I),O=T(m,{afterSubmit:r,allowNull:n,beforeSubmit:i,children:u,component:a,data:o,defaultValue:c,format:f,formatOnBlur:l,initialValue:s,isEqual:d,multiple:v,parse:p,subscription:b,type:g,validate:y,validateFields:h,value:O});if("function"==typeof u)return u(S({},O,e));if("string"==typeof a)return j.createElement(a,S({},O.input,{children:u,ref:t},e));if(!m)throw new Error("prop name cannot be undefined in <Field> component");return E(S({children:u,component:a,ref:t},e),O,"Field("+m+")")});e.Field=t,e.Form=u,e.FormSpy=f,e.useField=T,e.useForm=A,e.useFormState=o,e.version=i,e.withTypes=function(){return{Form:u,FormSpy:f}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
